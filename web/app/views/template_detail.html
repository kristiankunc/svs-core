{% extends "base.html" %}
{% block content %}
    <div class="py-8">
        <div class="mb-6 flex items-center">
            <a href="{% url 'templates' %}"
               class="text-blue-500 hover:text-blue-700 mr-3">
                <svg xmlns="http://www.w3.org/2000/svg"
                     class="h-5 w-5 inline"
                     fill="none"
                     viewBox="0 0 24 24"
                     stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                </svg>
                Back to Templates
            </a>
            <h1 class="text-3xl font-bold">Template: {{ template.name }}</h1>
        </div>
        <div class="bg-white rounded-lg shadow-md overflow-hidden p-6">
            <div class="flex items-center justify-between mb-6 pb-4 border-b border-gray-200">
                <div>
                    <span class="px-3 py-1 text-xs font-semibold rounded-full {% if template.type == 'image' %} bg-blue-100 text-blue-800 {% else %} bg-green-100 text-green-800 {% endif %}">
                        {{ template.type }}
                    </span>
                </div>
                <div class="text-sm text-gray-500">ID: {{ template.id }}</div>
            </div>
            <!-- Description -->
            <div class="mb-6">
                <h2 class="text-lg font-semibold mb-2">Description</h2>
                <p class="text-gray-700">
                    {% if template.description %}
                        {{ template.description }}
                    {% else %}
                        No description provided.
                    {% endif %}
                </p>
            </div>
            <!-- Template Details -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <!-- Left Column -->
                <div>
                    {% if template.type == 'image' %}
                        <div class="mb-4">
                            <h3 class="text-md font-semibold mb-1">Image</h3>
                            <p class="text-gray-700 bg-gray-50 p-2 rounded">{{ template.image|default:"N/A" }}</p>
                        </div>
                    {% else %}
                        <div class="mb-4">
                            <h3 class="text-md font-semibold mb-1">Dockerfile</h3>
                            <div class="bg-gray-50 p-2 rounded overflow-auto max-h-32">
                                <pre class="text-sm text-gray-700">{{ template.dockerfile|default:"N/A" }}</pre>
                            </div>
                        </div>
                    {% endif %}
                    {% if template.start_cmd %}
                        <div class="mb-4">
                            <h3 class="text-md font-semibold mb-1">Start Command</h3>
                            <div class="bg-gray-50 p-2 rounded">
                                <code class="text-sm text-gray-700">{{ template.start_cmd }}</code>
                            </div>
                        </div>
                    {% endif %}
                </div>
                <!-- Right Column -->
                <div>
                    <!-- Environment Variables -->
                    <div class="mb-4">
                        <h3 class="text-md font-semibold mb-1">Environment Variables</h3>
                        {% if template.default_env %}
                            <div class="bg-gray-50 rounded overflow-hidden">
                                <table class="w-full text-sm">
                                    <thead>
                                        <tr class="bg-gray-100">
                                            <th class="text-left py-2 px-3">Key</th>
                                            <th class="text-left py-2 px-3">Value</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for env in template.default_env %}
                                            <tr class="border-t border-gray-200">
                                                <td class="py-2 px-3 font-mono">{{ env.key }}</td>
                                                <td class="py-2 px-3 font-mono">{{ env.value }}</td>
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        {% else %}
                            <p class="text-gray-500 italic">No environment variables defined.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            <!-- Ports and Volumes -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Ports -->
                <div>
                    <h3 class="text-md font-semibold mb-1">Exposed Ports</h3>
                    {% if template.default_ports %}
                        <div class="bg-gray-50 rounded overflow-hidden">
                            <table class="w-full text-sm">
                                <thead>
                                    <tr class="bg-gray-100">
                                        <th class="text-left py-2 px-3">Container Port</th>
                                        <th class="text-left py-2 px-3">Host Port</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for port in template.default_ports %}
                                        <tr class="border-t border-gray-200">
                                            <td class="py-2 px-3">{{ port.container_port }}</td>
                                            <td class="py-2 px-3">{{ port.host_port|default:"Auto-assign" }}</td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <p class="text-gray-500 italic">No ports exposed.</p>
                    {% endif %}
                </div>
                <!-- Volumes -->
                <div>
                    <h3 class="text-md font-semibold mb-1">Volumes</h3>
                    {% if template.default_volumes %}
                        <div class="bg-gray-50 rounded overflow-hidden">
                            <table class="w-full text-sm">
                                <thead>
                                    <tr class="bg-gray-100">
                                        <th class="text-left py-2 px-3">Container Path</th>
                                        <th class="text-left py-2 px-3">Host Path</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for volume in template.default_volumes %}
                                        <tr class="border-t border-gray-200">
                                            <td class="py-2 px-3 font-mono">{{ volume.container_path }}</td>
                                            <td class="py-2 px-3 font-mono">{{ volume.host_path|default:"Auto-generate" }}</td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <p class="text-gray-500 italic">No volumes defined.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
