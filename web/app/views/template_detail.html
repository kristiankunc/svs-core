{% extends "base.html" %}
{% block content %}
    <div class="py-8">
        <div class="mb-6 flex items-center">
            <h1>Template: {{ template.name }}</h1>
        </div>
        <c-card>
        <c-card.header>
        <div class="flex items-center justify-between">
            <div>
                <c-card.description>
                <span class="px-3 py-1 text-xs font-semibold rounded-full {% if template.type == 'image' %} bg-blue-100 text-blue-800 {% else %} bg-green-100 text-green-800 {% endif %}">
                    {{ template.type }}
                </span>
                </c-card.description>
            </div>
            <div class="text-sm text-gray-500">ID: {{ template.id }}</div>
        </div>
        </c-card.header>
        <c-card.content>
        <div class="mb-6">
            <h2 class="text-lg font-semibold mb-2">Description</h2>
            <p class="text-gray-700">
                {% if template.description %}
                    {{ template.description }}
                {% else %}
                    No description provided.
                {% endif %}
            </p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <div>
                {% if template.type == 'image' %}
                    <div class="mb-4">
                        <h3 class="text-md font-semibold mb-1">Image</h3>
                        <p class="text-gray-700 bg-gray-50 p-2 rounded">{{ template.image|default:"N/A" }}</p>
                    </div>
                {% else %}
                    <div class="mb-4">
                        <h3 class="text-md font-semibold mb-1">Dockerfile</h3>
                        <div class="bg-gray-50 p-2 rounded overflow-auto max-h-32">
                            <pre class="text-sm text-gray-700">{{ template.dockerfile|default:"N/A" }}</pre>
                        </div>
                    </div>
                {% endif %}
                {% if template.start_cmd %}
                    <div class="mb-4">
                        <h3 class="text-md font-semibold mb-1">Start Command</h3>
                        <div class="bg-gray-50 p-2 rounded">
                            <code class="text-sm text-gray-700">{{ template.start_cmd }}</code>
                        </div>
                    </div>
                {% endif %}
            </div>
            <div>
                <div class="mb-4">
                    <h3 class="text-md font-semibold mb-1">Environment Variables</h3>
                    {% if template.default_env %}
                        <c-table>
                        <c-table.caption>Environment variables for this template</c-table.caption>
                        <c-table.header>
                        <c-table.row>
                        <c-table.head>Key</c-table.head>
                        <c-table.head>Value</c-table.head>
                        </c-table.row>
                        </c-table.header>
                        <c-table.body>
                        {% for env in template.default_env %}
                            <c-table.row>
                            <c-table.cell class="font-mono">{{ env.key }}</c-table.cell>
                            <c-table.cell class="font-mono">{{ env.value }}</c-table.cell>
                            </c-table.row>
                        {% endfor %}
                        </c-table.body>
                        </c-table>
                    {% else %}
                        <p class="text-gray-500 italic">No environment variables defined.</p>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
                <h3 class="text-md font-semibold mb-1">Exposed Ports</h3>
                {% if template.default_ports %}
                    <c-table>
                    <c-table.caption>Port mappings for this template</c-table.caption>
                    <c-table.header>
                    <c-table.row>
                    <c-table.head>Container Port</c-table.head>
                    <c-table.head>Host Port</c-table.head>
                    </c-table.row>
                    </c-table.header>
                    <c-table.body>
                    {% for port in template.default_ports %}
                        <c-table.row>
                        <c-table.cell>{{ port.container_port }}</c-table.cell>
                        <c-table.cell>{{ port.host_port|default:"Auto-assign" }}</c-table.cell>
                        </c-table.row>
                    {% endfor %}
                    </c-table.body>
                    </c-table>
                {% else %}
                    <p class="text-gray-500 italic">No ports exposed.</p>
                {% endif %}
            </div>
            <div>
                <h3 class="text-md font-semibold mb-1">Volumes</h3>
                {% if template.default_volumes %}
                    <c-table>
                    <c-table.caption>Volume mappings for this template</c-table.caption>
                    <c-table.header>
                    <c-table.row>
                    <c-table.head>Container Path</c-table.head>
                    <c-table.head>Host Path</c-table.head>
                    </c-table.row>
                    </c-table.header>
                    <c-table.body>
                    {% for volume in template.default_volumes %}
                        <c-table.row>
                        <c-table.cell class="font-mono">{{ volume.container_path }}</c-table.cell>
                        <c-table.cell class="font-mono">{{ volume.host_path|default:"Auto-generate" }}</c-table.cell>
                        </c-table.row>
                    {% endfor %}
                    </c-table.body>
                    </c-table>
                {% else %}
                    <p class="text-gray-500 italic">No volumes defined.</p>
                {% endif %}
            </div>
        </div>
        {% if user %}
            <div class="flex justify-end mt-6">
                <c-button>Use this template</c-button>
            </div>
        {% endif %}
        </c-card.content>
        <c-card.footer class="text-sm text-gray-500"> Created on {{ template.created_at|date:"F j, Y" }} </c-card.footer>
        </c-card>
    </div>
{% endblock %}
