{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"additionalProperties": false,
	"dependencies": {
		"dockerfile": {
			"properties": {
				"type": {
					"const": "build"
				}
			}
		},
		"image": {
			"properties": {
				"type": {
					"const": "image"
				}
			}
		}
	},
	"properties": {
		"$schema": {
			"type": "string"
		},
		"args": {
			"items": {
				"type": "string"
			},
			"type": [
				"array",
				"null"
			]
		},
		"default_env": {
			"oneOf": [
				{
					"additionalProperties": {
						"type": "string"
					},
					"type": "object"
				},
				{
					"items": {
						"additionalProperties": {
							"type": "string"
						},
						"maxProperties": 1,
						"minProperties": 1,
						"type": "object"
					},
					"type": "array"
				}
			]
		},
		"default_ports": {
			"items": {
				"oneOf": [
					{
						"additionalProperties": false,
						"properties": {
							"container": {
								"type": "integer"
							},
							"host": {
								"type": [
									"integer",
									"null"
								]
							}
						},
						"required": [
							"container"
						]
					},
					{
						"additionalProperties": {
							"type": "integer"
						},
						"maxProperties": 1,
						"minProperties": 1
					}
				],
				"type": "object"
			},
			"type": "array"
		},
		"default_volumes": {
			"description": "Array of volume mounts. Each volume is an object with container_path as key and host_path (or null for anonymous volumes) as value.",
			"items": {
				"additionalProperties": {
					"type": [
						"string",
						"null"
					]
				},
				"description": "Single volume mount in format {container_path: host_path} or {container_path: null}",
				"maxProperties": 1,
				"minProperties": 1,
				"propertyNames": {
					"description": "Container path (must start with /)",
					"type": "string"
				},
				"type": "object"
			},
			"type": "array"
		},
		"description": {
			"type": "string"
		},
		"dockerfile": {
			"type": [
				"string",
				"null"
			]
		},
		"healthcheck": {
			"additionalProperties": false,
			"properties": {
				"interval": {
					"minimum": 0,
					"type": "integer"
				},
				"retries": {
					"minimum": 0,
					"type": "integer"
				},
				"start_period": {
					"minimum": 0,
					"type": "integer"
				},
				"test": {
					"items": {
						"type": "string"
					},
					"minItems": 1,
					"type": "array"
				},
				"timeout": {
					"minimum": 0,
					"type": "integer"
				}
			},
			"type": [
				"object",
				"null"
			]
		},
		"image": {
			"type": "string"
		},
		"labels": {
			"oneOf": [
				{
					"additionalProperties": {
						"type": "string"
					},
					"type": "object"
				},
				{
					"items": {
						"additionalProperties": {
							"type": "string"
						},
						"maxProperties": 1,
						"minProperties": 1,
						"type": "object"
					},
					"type": "array"
				}
			]
		},
		"name": {
			"minLength": 1,
			"type": "string"
		},
		"start_cmd": {
			"items": {
				"type": "string"
			},
			"type": [
				"string",
				"array",
				"null"
			]
		},
		"type": {
			"enum": [
				"image",
				"build"
			],
			"type": "string"
		}
	},
	"required": [
		"name",
		"type"
	],
	"title": "Template",
	"type": "object"
}
